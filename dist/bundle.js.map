{"version":3,"sources":["webpack:///webpack/bootstrap b7f07b20d8da41b0ce22","webpack:///./lib/index.js","webpack:///./lib/VNode/index.js","webpack:///./lib/VElement/index.js","webpack:///./lib/VComment/index.js","webpack:///./lib/VText/index.js","webpack:///./lib/libs/diff.js","webpack:///./~/list-diff2/index.js","webpack:///./~/list-diff2/lib/diff.js","webpack:///./lib/utils.js","webpack:///./lib/libs/patch.js","webpack:///./lib/VNode/utils.js","webpack:///./lib/libs/htmlParser.js"],"names":["window","VD","VNode","VElement","VComment","VText","transformToVNode","diff","patch","processStyle","enableStyleEncode","style","split","map","piece","trim","filter","pairs","length","reduce","acc","cur","k","v","tagName","properties","children","key","namespace","count","child","parent","changeCount","push","el","document","createElement","Object","keys","forEach","propName","setAttribute","appendChild","render","data","createComment","createTextNode","TYPES","REPLACE","REORDER","PROPS","oldVN","newVN","idx","patches","walk","currentPatch","propsPatches","diffProps","type","props","isIgnoreChildren","diffChildren","node","constructor","oldProps","newProps","value","getOwnPropertyNames","hasOwnProperty","oldChildren","newChildren","diffs","reorderPatch","moves","leftVN","currentIdx","i","newChild","vn","isVElement","isVText","isVComment","getType","toArray","objExtend","setAttr","obj","toString","prototype","call","slice","_isArray","isArray","Array","rest","cssText","toLowerCase","indexOf","walker","currentPatches","childNodes","applyPatches","newNode","parentNode","replaceChild","reorderChildren","setProps","Error","removeAttribute","staticNodes","maps","nodeType","getAttribute","insertNode","move","removeChild","splice","item","insertBefore","transformNodeToVNode","res","HTMLElement","attributes","prev","curr","name","Text","Comment","transformStrToVNode","str","parse","nodeOrStr","Node","HTMLParser","TAG_START","TAG_END","QUOTES","SPACE","EQUAL","BACKSLASH","SLASH","BANG","SELF_TAG_NAMES","init","inStr","inTag","inBeginTag","inComment","depth","quote","pIdx","cIdx","ve","rootVe","stack","spaceCount","substr","l","charAt","token","pushChild","pop","pushVe","char","next","nextIsSlash","prevIsSlash","nextIsBang","getToken","getCommentData","pushProp","newElement","popVe","r"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b7f07b20d8da41b0ce22","/**\n * Created by yetone on 16/6/14.\n */\n\nimport VNode from './VNode';\nimport VElement from './VElement';\nimport VComment from './VComment';\nimport VText from './VText';\nimport diff from './libs/diff';\nimport patch from './libs/patch';\nimport { transformToVNode } from './VNode/utils';\n\nif (typeof window !== 'undefined') {\n    window.VD = {\n      VNode,\n      VElement,\n      VComment,\n      VText,\n      transformToVNode,\n      diff,\n      patch\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/index.js","/**\n * Created by yetone on 16/6/14.\n */\n\nexport default class VNode {\n    toString() {\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/VNode/index.js","/**\n * Created by yetone on 16/6/14.\n */\n\nimport VNode from '../VNode';\n\nlet enableStyleEncode = false;\n\nexport function processStyle(style) {\n    if (!enableStyleEncode) {\n        return style;\n    }\n    return style\n        .split(';')\n        .map(piece => piece.trim().split(':'))\n        .filter(pairs => pairs.length === 2)\n        .reduce((acc, cur) => {\n            let [ k, v ] = cur;\n            return {\n                ...acc,\n                [k.trim()]: v.trim()\n            }\n        }, {});\n}\n\nexport default class VElement extends VNode {\n    constructor(tagName, properties = {}, children = [], key, namespace) {\n        super();\n\n        this.tagName = tagName;\n        this.properties = properties;\n        this.children = children;\n        this.key = key;\n        this.namespace = namespace;\n\n        let { style } = this.properties;\n        if (typeof style === 'string') {\n            this.properties.style = processStyle(style);\n        }\n\n        this.count = this.children.reduce((count, child) => {\n            child.parent = this;\n            return count + (child.count || 0) + 1;\n        }, 0);\n    }\n\n    pushChild(child) {\n        let count = child.count || 0;\n        this.changeCount(count + 1);\n        child.parent = this;\n        this.children.push(child);\n    }\n\n    changeCount(count) {\n        if (this.parent) {\n            this.parent.changeCount(count);\n        }\n        this.count += count;\n    }\n\n    render() {\n        let el = document.createElement(this.tagName);\n        Object.keys(this.properties).forEach(propName => {\n            let v = this.properties[propName];\n            el.setAttribute(propName, v);\n        });\n        this.children.forEach(child => {\n            el.appendChild(child.render());\n        });\n        return el;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/VElement/index.js","/**\n * Created by yetone on 16/6/14.\n */\n\nimport VNode from '../VNode';\n\nexport default class VComment extends VNode {\n    constructor(data, key) {\n        super();\n        this.data = data;\n        this.key = key;\n    }\n\n    render() {\n        return document.createComment(this.data);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/VComment/index.js","/**\n * Created by yetone on 16/6/14.\n */\n\nimport VNode from '../VNode';\n\nexport default class VText extends VNode {\n    constructor(data, key) {\n        super();\n        this.data = data;\n        this.key = key;\n    }\n\n    render() {\n        return document.createTextNode(this.data);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/VText/index.js","/**\n * Created by yetone on 16/6/17.\n */\n\nimport listDiff from 'list-diff2';\nimport { isVElement } from '../utils';\n\nexport const TYPES = {\n    REPLACE: 0,\n    REORDER: 1,\n    PROPS: 2\n};\n\nexport default function diff(oldVN, newVN) {\n    let idx = 0;\n    let patches = {};\n    walk(oldVN, newVN, idx, patches);\n    return patches;\n}\n\nfunction walk(oldVN, newVN, idx, patches) {\n    let currentPatch = [];\n    if (!newVN) {\n        // pass\n    } else if (isVElement(oldVN) && isVElement(newVN)) {\n        if (oldVN.tagName === newVN.tagName && oldVN.key === newVN.key) {\n            // Diff props\n            let propsPatches = diffProps(oldVN, newVN);\n            if (propsPatches) {\n                currentPatch.push({ type: TYPES.PROPS, props: propsPatches });\n            }\n            // Diff children. If the node has a `ignore` property, do not diff children\n            if (!isIgnoreChildren(newVN)) {\n                diffChildren(\n                    oldVN.children,\n                    newVN.children,\n                    idx,\n                    patches,\n                    currentPatch\n                )\n            }\n        } else {\n            currentPatch.push({ type: TYPES.REPLACE, node: newVN });\n        }\n    } else {\n        if (oldVN.constructor === newVN.constructor) {\n            if (oldVN.data !== newVN.data) {\n                currentPatch.push({ type: TYPES.REPLACE, node: newVN, data: true });\n            }\n        } else {\n            currentPatch.push({ type: TYPES.REPLACE, node: newVN });\n        }\n    }\n\n    if (currentPatch.length) {\n        patches[idx] = currentPatch\n    }\n}\n\nfunction diffProps(oldVN, newVN) {\n    let count = 0;\n    let oldProps = oldVN.properties;\n    let newProps = newVN.properties;\n\n    let value;\n    let propsPatches = {};\n\n    // Find out different properties\n    Object.getOwnPropertyNames(oldProps).forEach(key => {\n        value = oldProps[key];\n        if (newProps[key] !== value) {\n            count++;\n            propsPatches[key] = newProps[key];\n        }\n    });\n\n    // Find out new property\n    Object.getOwnPropertyNames(newProps).forEach(key => {\n        value = newProps[key];\n        if (!oldProps.hasOwnProperty(key)) {\n            count++;\n            propsPatches[key] = newProps[key];\n        }\n    });\n\n    // If properties all are identical\n    if (count === 0) {\n        return null;\n    }\n\n    return propsPatches;\n}\n\nfunction diffChildren(oldChildren, newChildren, idx, patches, currentPatch) {\n    let diffs = listDiff(oldChildren, newChildren, 'key');\n    let reorderPatch;\n    newChildren = diffs.children;\n\n    if (diffs.moves.length) {\n        reorderPatch = {\n            type: TYPES.REORDER,\n            moves: diffs.moves\n        };\n        currentPatch.push(reorderPatch);\n    }\n\n    let leftVN = null;\n    let currentIdx = idx;\n    oldChildren.forEach((child, i) => {\n        let newChild = newChildren[i];\n        let count = leftVN ? leftVN.count || 0 : 0;\n        currentIdx = currentIdx + count + 1;\n        walk(child, newChild, currentIdx, patches);\n        leftVN = child;\n    })\n}\n\nfunction isIgnoreChildren(vn) {\n    return vn.properties && vn.properties.hasOwnProperty('ignore');\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/libs/diff.js","module.exports = require('./lib/diff').diff\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/list-diff2/index.js\n// module id = 7\n// module chunks = 0","/**\r\n * Diff two list in O(N).\r\n * @param {Array} oldList - Original List\r\n * @param {Array} newList - List After certain insertions, removes, or moves\r\n * @return {Object} - {moves: <Array>}\r\n *                  - moves is a list of actions that telling how to remove and insert\r\n */\r\nfunction diff (oldList, newList, key) {\r\n  var oldMap = makeKeyIndexAndFree(oldList, key)\r\n  var newMap = makeKeyIndexAndFree(newList, key)\r\n\r\n  var newFree = newMap.free\r\n\r\n  var oldKeyIndex = oldMap.keyIndex\r\n  var newKeyIndex = newMap.keyIndex\r\n\r\n  var moves = []\r\n\r\n  // a simulate list to manipulate\r\n  var children = []\r\n  var i = 0\r\n  var item\r\n  var itemKey\r\n  var freeIndex = 0\r\n\r\n  // fist pass to check item in old list: if it's removed or not\r\n  while (i < oldList.length) {\r\n    item = oldList[i]\r\n    itemKey = getItemKey(item, key)\r\n    if (itemKey) {\r\n      if (!newKeyIndex.hasOwnProperty(itemKey)) {\r\n        children.push(null)\r\n      } else {\r\n        var newItemIndex = newKeyIndex[itemKey]\r\n        children.push(newList[newItemIndex])\r\n      }\r\n    } else {\r\n      var freeItem = newFree[freeIndex++]\r\n      children.push(freeItem || null)\r\n    }\r\n    i++\r\n  }\r\n\r\n  var simulateList = children.slice(0)\r\n\r\n  // remove items no longer exist\r\n  i = 0\r\n  while (i < simulateList.length) {\r\n    if (simulateList[i] === null) {\r\n      remove(i)\r\n      removeSimulate(i)\r\n    } else {\r\n      i++\r\n    }\r\n  }\r\n\r\n  // i is cursor pointing to a item in new list\r\n  // j is cursor pointing to a item in simulateList\r\n  var j = i = 0\r\n  while (i < newList.length) {\r\n    item = newList[i]\r\n    itemKey = getItemKey(item, key)\r\n\r\n    var simulateItem = simulateList[j]\r\n    var simulateItemKey = getItemKey(simulateItem, key)\r\n\r\n    if (simulateItem) {\r\n      if (itemKey === simulateItemKey) {\r\n        j++\r\n      } else {\r\n        // new item, just inesrt it\r\n        if (!oldKeyIndex.hasOwnProperty(itemKey)) {\r\n          insert(i, item)\r\n        } else {\r\n          // if remove current simulateItem make item in right place\r\n          // then just remove it\r\n          var nextItemKey = getItemKey(simulateList[j + 1], key)\r\n          if (nextItemKey === itemKey) {\r\n            remove(i)\r\n            removeSimulate(j)\r\n            j++ // after removing, current j is right, just jump to next one\r\n          } else {\r\n            // else insert item\r\n            insert(i, item)\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      insert(i, item)\r\n    }\r\n\r\n    i++\r\n  }\r\n\r\n  function remove (index) {\r\n    var move = {index: index, type: 0}\r\n    moves.push(move)\r\n  }\r\n\r\n  function insert (index, item) {\r\n    var move = {index: index, item: item, type: 1}\r\n    moves.push(move)\r\n  }\r\n\r\n  function removeSimulate (index) {\r\n    simulateList.splice(index, 1)\r\n  }\r\n\r\n  return {\r\n    moves: moves,\r\n    children: children\r\n  }\r\n}\r\n\r\n/**\r\n * Convert list to key-item keyIndex object.\r\n * @param {Array} list\r\n * @param {String|Function} key\r\n */\r\nfunction makeKeyIndexAndFree (list, key) {\r\n  var keyIndex = {}\r\n  var free = []\r\n  for (var i = 0, len = list.length; i < len; i++) {\r\n    var item = list[i]\r\n    var itemKey = getItemKey(item, key)\r\n    if (itemKey) {\r\n      keyIndex[itemKey] = i\r\n    } else {\r\n      free.push(item)\r\n    }\r\n  }\r\n  return {\r\n    keyIndex: keyIndex,\r\n    free: free\r\n  }\r\n}\r\n\r\nfunction getItemKey (item, key) {\r\n  if (!item || !key) return void 666\r\n  return typeof key === 'string'\r\n    ? item[key]\r\n    : key(item)\r\n}\r\n\r\nexports.makeKeyIndexAndFree = makeKeyIndexAndFree // exports for test\r\nexports.diff = diff\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/list-diff2/lib/diff.js\n// module id = 8\n// module chunks = 0","/**\n * Created by yetone on 16/6/14.\n */\nimport VElement from './VElement';\nimport VText from './VText';\nimport VComment from './VComment';\n\nexport function isVElement(obj) {\n    return obj instanceof VElement;\n}\n\nexport function isVText(obj) {\n    return obj instanceof VText;\n}\n\nexport function isVComment(obj) {\n    return obj instanceof VComment;\n}\n\nconst toString = Object.prototype.toString;\n\nexport function getType(obj) {\n    return toString.call(obj).slice(8, -1);\n}\n\nfunction _isArray(obj) {\n    return getType(obj) === 'Array';\n}\n\nexport const isArray = Array.isArray || _isArray;\n\nexport function toArray(obj) {\n    return Array.prototype.slice.call(obj);\n}\n\nexport function objExtend(obj, rest, filter = () => true) {\n    Object.keys(rest).filter(filter).forEach(k => {\n        obj[k] = rest[k];\n    });\n}\n\nexport function setAttr(node, key, value) {\n    switch (key) {\n        case 'style':\n            node.style.cssText = value;\n            break;\n        case 'value':\n            var tagName = node.tagName || '';\n            tagName = tagName.toLowerCase();\n            if (['input', 'textarea'].indexOf(tagName) + 1) {\n                node.value = value\n            } else {\n                // if it is not a input or textarea, use `setAttribute` to set\n                node.setAttribute(key, value);\n            }\n            break;\n        default:\n            node.setAttribute(key, value);\n            break;\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/utils.js","/**\n * Created by yetone on 16/6/17.\n */\n\nimport { TYPES } from './diff';\nimport { toArray, setAttr } from '../utils';\n\nexport default function patch(node, patches) {\n    let walker = { idx: 0 };\n    walk(node, walker, patches)\n}\n\nfunction walk(node, walker, patches) {\n    let currentPatches = patches[walker.idx];\n\n    toArray(node.childNodes).forEach(child => {\n        walker.idx++;\n        walk(child, walker, patches);\n    });\n\n    if (currentPatches) {\n        applyPatches(node, currentPatches);\n    }\n}\n\nfunction applyPatches(node, patches) {\n    let newNode;\n    patches.forEach(patch => {\n        switch (patch.type) {\n            case TYPES.REPLACE:\n                if (patch.data) {\n                    node.data = patch.node.data;\n                } else {\n                    newNode = patch.node.render();\n                    node.parentNode.replaceChild(newNode, node);\n                }\n                break;\n            case TYPES.REORDER:\n                reorderChildren(node, patch.moves);\n                break;\n            case TYPES.PROPS:\n                setProps(node, patch.props);\n                break;\n            default:\n                throw new Error('Unknown patch type ' + patch.type);\n        }\n    })\n}\n\nfunction setProps(node, props) {\n    let value;\n    Object.getOwnPropertyNames(props).forEach(key => {\n        value = props[key];\n        if (value === void 0) {\n            node.removeAttribute();\n        } else {\n            setAttr(node, key, value)\n        }\n    });\n}\n\nfunction reorderChildren(node, moves) {\n    let childNodes = node.childNodes;\n    let staticNodes = toArray(childNodes);\n    let maps = {};\n\n    staticNodes.forEach(node => {\n        if (node.nodeType === 1) {\n            let key = node.getAttribute('key');\n            if (key) {\n                maps[key] = node;\n            }\n        }\n    });\n\n    moves.forEach(move => {\n        let insertNode;\n        let idx = move.idx;\n        if (move.type === 0) { // remove item\n            if (staticNodes[idx] === childNodes[idx]) { // maybe have been removed for inserting\n                node.removeChild(childNodes[idx]);\n            }\n            staticNodes.splice(idx, 1);\n        } else if (move.type === 1) { // insert item\n            insertNode = maps[move.item.key]\n                ? maps[move.item.key] // reuse old item\n                : move.item.render();\n            staticNodes.splice(idx, 0, insertNode);\n            node.insertBefore(insertNode, childNodes[idx] || null);\n        }\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/libs/patch.js","/**\n * Created by yetone on 16/6/14.\n */\n\nimport VElement from '../VElement';\nimport VText from '../VText';\nimport VComment from '../VComment';\nimport { toArray } from '../utils';\nimport htmlParser from '../libs/htmlParser';\n\nfunction transformNodeToVNode(node) {\n    let res;\n    let properties;\n    let children = toArray(node.childNodes).map(transformNodeToVNode);\n    if (node instanceof HTMLElement) {\n        properties = toArray(node.attributes).reduce((prev, curr) => {\n            return {\n                ...prev,\n                [curr.name]: curr.value\n            }\n        }, {});\n        res = new VElement(node.tagName.toLowerCase(), properties, children);\n    } else if (node instanceof Text) {\n        res = new VText(node.data);\n    } else if (node instanceof Comment) {\n        res = new VComment(node.data);\n    }\n    return res;\n}\n\nfunction transformStrToVNode(str) {\n    return htmlParser.parse(str);\n}\n\nexport function transformToVNode(nodeOrStr) {\n    if (nodeOrStr instanceof Node) {\n        return transformNodeToVNode(nodeOrStr);\n    }\n    return transformStrToVNode(nodeOrStr);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/VNode/utils.js","/**\n * Created by yetone on 16/6/14.\n */\n\nimport VText from '../VText';\nimport VComment from '../VComment';\nimport VElement, { processStyle } from '../VElement';\n\nclass HTMLParser {\n    TAG_START = '<';\n    TAG_END = '>';\n    QUOTES = ['\"', \"'\"];\n    SPACE = ' ';\n    EQUAL = '=';\n    BACKSLASH = '\\\\';\n    SLASH = '/';\n    BANG = '!';\n    SELF_TAG_NAMES = [\n        'img', 'link', 'br', 'hr', 'col', 'area', 'meta', 'frame', 'input', 'param'\n    ];\n\n    constructor() {\n        this.init();\n    }\n\n    init() {\n        this.inStr = false;\n        this.inTag = false;\n        this.inBeginTag = false;\n        this.inComment = false;\n        this.depth = 0;\n        this.quote = void 0;\n        this.pIdx = 0;\n        this.cIdx = 0;\n        this.ve = void 0;\n        this.rootVe = void 0;\n        this.prev = void 0;\n        this.str = void 0;\n        this.stack = [];\n        this.spaceCount = 0;\n    }\n\n    getToken() {\n        return this.str.substr(this.pIdx + 1, this.cIdx - this.pIdx - 1);\n    }\n\n    getCommentData(v) {\n        v = v.substr(1);\n        let l = v.length;\n        if (v.charAt(0) === '-' && v.charAt(1) === '-') {\n            if (v.charAt(l - 2) === '-' && v.charAt(l - 1) === '-') {\n                return v.substr(2, l - 4);\n            } else {\n                return v.substr(2);\n            }\n        }\n        return v;\n    }\n\n    pushProp(token) {\n        let l = token.length;\n        let idx = token.indexOf('=');\n        let k, v;\n        if (idx < 0) {\n            k = token;\n            v = '';\n        } else {\n            k = token.substr(0, idx);\n            v = token.substr(idx + 2, l - k.length - 3);\n        }\n        if (k === 'style') {\n            v = processStyle(v);\n        }\n        this.ve.properties[k] = v;\n    }\n\n    pushChild(v) {\n        if (!this.ve) {\n            return;\n        }\n        this.ve.pushChild(v);\n    }\n\n    pushVe(ve) {\n        this.stack.push(ve);\n        this.depth++;\n        this.ve = ve;\n        if (!this.rootVe) {\n            this.rootVe = ve;\n        }\n    }\n\n    popVe() {\n        this.stack.pop();\n        this.depth--;\n        this.ve = this.stack[this.depth - 1];\n    }\n\n    newElement(tagName) {\n        let ve = new VElement(tagName);\n        this.pushChild(ve);\n        this.pushVe(ve);\n    }\n\n    parse(str) {\n        str = str.trim();\n        this.str = str;\n        let idx = 0;\n        let char = str.charAt(idx);\n        let token;\n        let next;\n        let nextIsSlash;\n        let prevIsSlash;\n        let nextIsBang;\n        while (char) {\n            this.cIdx = idx;\n            if (!this.inStr) {\n                if (char === this.TAG_START) {\n                    token = this.getToken();\n                    next = str.charAt(idx + 1);\n                    nextIsSlash = next === this.SLASH;\n                    nextIsBang = next === this.BANG;\n\n                    if (token && !this.inComment) {\n                        this.pushChild(new VText(token));\n                    }\n\n                    if (nextIsBang) {\n                        this.inComment = true;\n                    } else {\n                        this.inTag = true;\n                        if (!nextIsSlash) {\n                            this.inBeginTag = true;\n                        }\n                    }\n                    this.pIdx = idx;\n                }\n                if (char === this.TAG_END) {\n                    token = this.getToken();\n                    if (this.inComment) {\n                        this.pushChild(new VComment(this.getCommentData(token)));\n                        this.inComment = false;\n                    } else if (this.inTag) {\n                        if (this.inBeginTag) {\n                            prevIsSlash = this.prev === this.SLASH;\n                            if (token) {\n                                if (this.spaceCount !== 0 && !prevIsSlash) {\n                                    this.pushProp(token);\n                                } else if (!prevIsSlash) {\n                                    this.newElement(token);\n                                } else {\n                                    this.popVe();\n                                }\n                                if (!prevIsSlash && this.ve && this.SELF_TAG_NAMES.indexOf(this.ve.tagName.toLowerCase()) >= 0) {\n                                    this.popVe();\n                                }\n                            } else if (this.ve && this.SELF_TAG_NAMES.indexOf(this.ve.tagName.toLowerCase()) >= 0) {\n                                this.popVe();\n                            }\n                        } else {\n                            this.popVe();\n                        }\n                        this.inTag = false;\n                        this.inBeginTag = false;\n                        this.spaceCount = 0;\n                    }\n                    this.pIdx = idx;\n                }\n                if (this.inBeginTag && char === this.SPACE) {\n                    token = this.getToken();\n                    if (token) {\n                        if (this.spaceCount === 0) {\n                            this.newElement(token);\n                        } else {\n                            this.pushProp(token);\n                        }\n                    }\n                    this.spaceCount++;\n                    this.pIdx = idx;\n                }\n                if (this.inBeginTag && char === this.SLASH && this.spaceCount === 0 && str.charAt(idx + 1) === this.TAG_END) {\n                    token = this.getToken();\n                    this.newElement(token);\n                }\n                if (this.inBeginTag && [this.SPACE, this.SLASH, this.TAG_END].indexOf(char) < 0 && this.QUOTES.indexOf(this.prev) >= 0) {\n                    this.pushProp(this.getToken());\n                    this.pIdx = idx - 1;\n                }\n            }\n            if (this.QUOTES.indexOf(char) >= 0) {\n                if (this.quote === void 0) {\n                    this.quote = char;\n                    this.inStr = true;\n                } else if (this.quote === char) {\n                    this.quote = void 0;\n                    this.inStr = false;\n                }\n            }\n            this.prev = char;\n            char = str.charAt(++idx);\n        }\n        let r = this.rootVe;\n        this.init();\n        return r;\n    }\n}\n\nexport default new HTMLParser();\n\n\n\n// WEBPACK FOOTER //\n// ./lib/libs/htmlParser.js"],"sourceRoot":""}